(()=>{var e={147:(e,n,t)=>{e.exports=t(949)},242:(e,n,t)=>{"use strict";var r=t(184),o=t(183),i=t(694),a=t(859),s=t(629),c=t(104),l=t(26),d=t(368);e.exports=function(e){return new Promise((function(n,t){var p=e.data,u=e.headers;r.isFormData(p)&&delete u["Content-Type"];var f=new XMLHttpRequest;if(e.auth){var m=e.auth.username||"",h=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";u.Authorization="Basic "+btoa(m+":"+h)}var g=s(e.baseURL,e.url);if(f.open(e.method.toUpperCase(),a(g,e.params,e.paramsSerializer),!0),f.timeout=e.timeout,f.onreadystatechange=function(){if(f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in f?c(f.getAllResponseHeaders()):null,i={data:e.responseType&&"text"!==e.responseType?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:r,config:e,request:f};o(n,t,i),f=null}},f.onabort=function(){f&&(t(d("Request aborted",e,"ECONNABORTED",f)),f=null)},f.onerror=function(){t(d("Network Error",e,null,f)),f=null},f.ontimeout=function(){var n="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(n=e.timeoutErrorMessage),t(d(n,e,"ECONNABORTED",f)),f=null},r.isStandardBrowserEnv()){var v=(e.withCredentials||l(g))&&e.xsrfCookieName?i.read(e.xsrfCookieName):void 0;v&&(u[e.xsrfHeaderName]=v)}if("setRequestHeader"in f&&r.forEach(u,(function(e,n){void 0===p&&"content-type"===n.toLowerCase()?delete u[n]:f.setRequestHeader(n,e)})),r.isUndefined(e.withCredentials)||(f.withCredentials=!!e.withCredentials),e.responseType)try{f.responseType=e.responseType}catch(n){if("json"!==e.responseType)throw n}"function"==typeof e.onDownloadProgress&&f.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&f.upload&&f.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){f&&(f.abort(),t(e),f=null)})),p||(p=null),f.send(p)}))}},949:(e,n,t)=>{"use strict";var r=t(184),o=t(76),i=t(596),a=t(227);function s(e){var n=new i(e),t=o(i.prototype.request,n);return r.extend(t,i.prototype,n),r.extend(t,n),t}var c=s(t(221));c.Axios=i,c.create=function(e){return s(a(c.defaults,e))},c.Cancel=t(313),c.CancelToken=t(15),c.isCancel=t(207),c.all=function(e){return Promise.all(e)},c.spread=t(232),c.isAxiosError=t(782),e.exports=c,e.exports.default=c},313:e=>{"use strict";function n(e){this.message=e}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,e.exports=n},15:(e,n,t)=>{"use strict";var r=t(313);function o(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var n;this.promise=new Promise((function(e){n=e}));var t=this;e((function(e){t.reason||(t.reason=new r(e),n(t.reason))}))}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.source=function(){var e;return{token:new o((function(n){e=n})),cancel:e}},e.exports=o},207:e=>{"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},596:(e,n,t)=>{"use strict";var r=t(184),o=t(859),i=t(159),a=t(755),s=t(227);function c(e){this.defaults=e,this.interceptors={request:new i,response:new i}}c.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=s(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var n=[a,void 0],t=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){n.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){n.push(e.fulfilled,e.rejected)}));n.length;)t=t.then(n.shift(),n.shift());return t},c.prototype.getUri=function(e){return e=s(this.defaults,e),o(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){c.prototype[e]=function(n,t){return this.request(s(t||{},{method:e,url:n,data:(t||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){c.prototype[e]=function(n,t,r){return this.request(s(r||{},{method:e,url:n,data:t}))}})),e.exports=c},159:(e,n,t)=>{"use strict";var r=t(184);function o(){this.handlers=[]}o.prototype.use=function(e,n){return this.handlers.push({fulfilled:e,rejected:n}),this.handlers.length-1},o.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},o.prototype.forEach=function(e){r.forEach(this.handlers,(function(n){null!==n&&e(n)}))},e.exports=o},629:(e,n,t)=>{"use strict";var r=t(867),o=t(677);e.exports=function(e,n){return e&&!r(n)?o(e,n):n}},368:(e,n,t)=>{"use strict";var r=t(205);e.exports=function(e,n,t,o,i){var a=new Error(e);return r(a,n,t,o,i)}},755:(e,n,t)=>{"use strict";var r=t(184),o=t(518),i=t(207),a=t(221);function s(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return s(e),e.headers=e.headers||{},e.data=o(e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(n){delete e.headers[n]})),(e.adapter||a.adapter)(e).then((function(n){return s(e),n.data=o(n.data,n.headers,e.transformResponse),n}),(function(n){return i(n)||(s(e),n&&n.response&&(n.response.data=o(n.response.data,n.response.headers,e.transformResponse))),Promise.reject(n)}))}},205:e=>{"use strict";e.exports=function(e,n,t,r,o){return e.config=n,t&&(e.code=t),e.request=r,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},227:(e,n,t)=>{"use strict";var r=t(184);e.exports=function(e,n){n=n||{};var t={},o=["url","method","data"],i=["headers","auth","proxy","params"],a=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],s=["validateStatus"];function c(e,n){return r.isPlainObject(e)&&r.isPlainObject(n)?r.merge(e,n):r.isPlainObject(n)?r.merge({},n):r.isArray(n)?n.slice():n}function l(o){r.isUndefined(n[o])?r.isUndefined(e[o])||(t[o]=c(void 0,e[o])):t[o]=c(e[o],n[o])}r.forEach(o,(function(e){r.isUndefined(n[e])||(t[e]=c(void 0,n[e]))})),r.forEach(i,l),r.forEach(a,(function(o){r.isUndefined(n[o])?r.isUndefined(e[o])||(t[o]=c(void 0,e[o])):t[o]=c(void 0,n[o])})),r.forEach(s,(function(r){r in n?t[r]=c(e[r],n[r]):r in e&&(t[r]=c(void 0,e[r]))}));var d=o.concat(i).concat(a).concat(s),p=Object.keys(e).concat(Object.keys(n)).filter((function(e){return-1===d.indexOf(e)}));return r.forEach(p,l),t}},183:(e,n,t)=>{"use strict";var r=t(368);e.exports=function(e,n,t){var o=t.config.validateStatus;t.status&&o&&!o(t.status)?n(r("Request failed with status code "+t.status,t.config,null,t.request,t)):e(t)}},518:(e,n,t)=>{"use strict";var r=t(184);e.exports=function(e,n,t){return r.forEach(t,(function(t){e=t(e,n)})),e}},221:(e,n,t)=>{"use strict";var r=t(184),o=t(890),i={"Content-Type":"application/x-www-form-urlencoded"};function a(e,n){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=n)}var s,c={adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(s=t(242)),s),transformRequest:[function(e,n){return o(n,"Accept"),o(n,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(a(n,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)?(a(n,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};c.headers={common:{Accept:"application/json, text/plain, */*"}},r.forEach(["delete","get","head"],(function(e){c.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){c.headers[e]=r.merge(i)})),e.exports=c},76:e=>{"use strict";e.exports=function(e,n){return function(){for(var t=new Array(arguments.length),r=0;r<t.length;r++)t[r]=arguments[r];return e.apply(n,t)}}},859:(e,n,t)=>{"use strict";var r=t(184);function o(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,n,t){if(!n)return e;var i;if(t)i=t(n);else if(r.isURLSearchParams(n))i=n.toString();else{var a=[];r.forEach(n,(function(e,n){null!=e&&(r.isArray(e)?n+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),a.push(o(n)+"="+o(e))})))})),i=a.join("&")}if(i){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}},677:e=>{"use strict";e.exports=function(e,n){return n?e.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):e}},694:(e,n,t)=>{"use strict";var r=t(184);e.exports=r.isStandardBrowserEnv()?{write:function(e,n,t,o,i,a){var s=[];s.push(e+"="+encodeURIComponent(n)),r.isNumber(t)&&s.push("expires="+new Date(t).toGMTString()),r.isString(o)&&s.push("path="+o),r.isString(i)&&s.push("domain="+i),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var n=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},867:e=>{"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},782:e=>{"use strict";e.exports=function(e){return"object"==typeof e&&!0===e.isAxiosError}},26:(e,n,t)=>{"use strict";var r=t(184);e.exports=r.isStandardBrowserEnv()?function(){var e,n=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");function o(e){var r=e;return n&&(t.setAttribute("href",r),r=t.href),t.setAttribute("href",r),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return e=o(window.location.href),function(n){var t=r.isString(n)?o(n):n;return t.protocol===e.protocol&&t.host===e.host}}():function(){return!0}},890:(e,n,t)=>{"use strict";var r=t(184);e.exports=function(e,n){r.forEach(e,(function(t,r){r!==n&&r.toUpperCase()===n.toUpperCase()&&(e[n]=t,delete e[r])}))}},104:(e,n,t)=>{"use strict";var r=t(184),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var n,t,i,a={};return e?(r.forEach(e.split("\n"),(function(e){if(i=e.indexOf(":"),n=r.trim(e.substr(0,i)).toLowerCase(),t=r.trim(e.substr(i+1)),n){if(a[n]&&o.indexOf(n)>=0)return;a[n]="set-cookie"===n?(a[n]?a[n]:[]).concat([t]):a[n]?a[n]+", "+t:t}})),a):a}},232:e=>{"use strict";e.exports=function(e){return function(n){return e.apply(null,n)}}},184:(e,n,t)=>{"use strict";var r=t(76),o=Object.prototype.toString;function i(e){return"[object Array]"===o.call(e)}function a(e){return void 0===e}function s(e){return null!==e&&"object"==typeof e}function c(e){if("[object Object]"!==o.call(e))return!1;var n=Object.getPrototypeOf(e);return null===n||n===Object.prototype}function l(e){return"[object Function]"===o.call(e)}function d(e,n){if(null!=e)if("object"!=typeof e&&(e=[e]),i(e))for(var t=0,r=e.length;t<r;t++)n.call(null,e[t],t,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.call(null,e[o],o,e)}e.exports={isArray:i,isArrayBuffer:function(e){return"[object ArrayBuffer]"===o.call(e)},isBuffer:function(e){return null!==e&&!a(e)&&null!==e.constructor&&!a(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:s,isPlainObject:c,isUndefined:a,isDate:function(e){return"[object Date]"===o.call(e)},isFile:function(e){return"[object File]"===o.call(e)},isBlob:function(e){return"[object Blob]"===o.call(e)},isFunction:l,isStream:function(e){return s(e)&&l(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:d,merge:function e(){var n={};function t(t,r){c(n[r])&&c(t)?n[r]=e(n[r],t):c(t)?n[r]=e({},t):i(t)?n[r]=t.slice():n[r]=t}for(var r=0,o=arguments.length;r<o;r++)d(arguments[r],t);return n},extend:function(e,n,t){return d(n,(function(n,o){e[o]=t&&"function"==typeof n?r(n,t):n})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},554:(e,n,t)=>{"use strict";t.d(n,{Z:()=>d});var r=t(154),o=t.n(r),i=t(833),a=t.n(i),s=t(6),c=o()((function(e){return e[1]})),l=a()(s.Z);c.push([e.id,'* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\ninput,\ntextarea,\nselect {\n  outline: none;\n  border: none;\n}\ntextarea {\n  resize: none;\n}\nhtml {\n  height: 100%;\n  width: 100%;\n}\nbody {\n  overflow-x: hidden;\n  color: #121212;\n  font-family: -apple-system, BlinkMacSystemFont, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif;\n  font-size: 14px;\n  line-height: 1.42857143;\n  height: 100%;\n  width: 100%;\n  -webkit-tap-highlight-color: rgba(18, 18, 18, 0);\n  touch-action: pan-x pan-y;\n  overflow-y: hidden;\n}\na {\n  text-decoration: none;\n  color: inherit;\n  font-size: inherit;\n}\npre {\n  font-family: inherit;\n  font-size: inherit;\n}\nimg {\n  vertical-align: middle;\n}\n.flex {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.flex-column {\n  flex-direction: column;\n  align-items: flex-start;\n}\n.container-fluid {\n  width: 100%;\n  display: flex;\n  justify-content: center;\n}\n.container-fluid .container {\n  width: 1200px;\n}\n:root {\n  --primary-color: #45a1e2;\n  --danger-color: #F56C6C;\n  --grey-color: #939597;\n  --widget-boxshadow: 0 2px 6px 0 rgba(0, 0, 0, 0.2);\n}\n#map-container {\n  width: 100%;\n  height: 100%;\n}\n.point-form-container {\n  z-index: 999;\n  position: fixed;\n  right: 0;\n  top: 0;\n  height: 100%;\n  width: 500px;\n  min-width: 200px;\n  overflow-y: auto;\n  background-color: #00000088;\n  backdrop-filter: blur(5px);\n  -webkit-backdrop-filter: blur(5px);\n  transition: all 0.3s ease;\n  transform: translateX(100%);\n}\n.point-form-container.active {\n  transform: translateX(0);\n}\n.point-form {\n  display: flex;\n  flex-direction: column;\n  padding: 10px 20px;\n  /* background-color: var(--primary-color); */\n}\n.point-form .button {\n  display: block;\n  width: 100%;\n}\n.upload.dragging {\n  outline: 2px dashed var(--primary-color);\n}\n.upload-preview-image {\n  width: 100px;\n  height: 100px;\n  background-color: #dedede;\n  position: relative;\n  border-radius: 5px;\n  overflow: hidden;\n  margin-right: 5px;\n  margin-bottom: 5px;\n}\n.upload-preview {\n  display: flex;\n  flex-wrap: wrap;\n}\n.upload-preview-image img {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\n.upload-preview-image-remove {\n  width: 0;\n  height: 0;\n  position: absolute;\n  right: 0;\n  top: 0;\n  color: #fff;\n  border-top: 30px solid var(--primary-color);\n  border-left: 30px solid transparent;\n  opacity: 0.7;\n  cursor: pointer;\n}\n.upload-preview-image-remove:before {\n  content: "+";\n  position: absolute;\n  width: 20px;\n  height: 20px;\n  left: -12px;\n  top: 0;\n  top: -31px;\n  font-size: 20px;\n  transform: rotate(45deg);\n}\n.upload-card {\n  width: 100px;\n  height: 100px;\n  color: var(--grey-color);\n  border-radius: 5px;\n  border: 1px dashed var(--grey-color);\n  cursor: pointer;\n}\n.upload-card:before {\n  display: block;\n  content: "+";\n  font-size: 40px;\n  width: 100%;\n  line-height: 96px;\n  text-align: center;\n  color: inherit;\n}\n.upload-card:hover {\n  color: var(--primary-color);\n  border: 1px dashed var(--primary-color);\n}\n.upload-card input.form-control {\n  display: none;\n}\n.point-detail {\n  max-width: 400px;\n}\n.point-detail pre,\n.point-detail p {\n  word-break: break-all;\n}\n.point-detail pre {\n  color: #333;\n  margin: 10px 0;\n  font-size: 15px;\n  line-height: 1.67;\n  white-space: pre-wrap;\n}\n.point-detail h3 {\n  color: #121212;\n  font-size: 18px;\n  font-weight: 600;\n}\n.point-detail p {\n  color: #999;\n  font-size: 12px;\n}\n.point-remove {\n  margin-top: 10px;\n}\n.point-images {\n  display: flex;\n  flex-wrap: wrap;\n  margin-top: 10px;\n}\n.point-image {\n  width: 95px;\n  height: 95px;\n  position: relative;\n  border-radius: 5px;\n  overflow: hidden;\n  margin-right: 5px;\n  margin-bottom: 5px;\n  background-color: rgba(0, 0, 0, 0.1);\n  border: 1px solid #dedede;\n}\n.point-image img {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\n.form-heading {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border-bottom: 1px solid #aaa;\n  color: #fff;\n  margin-bottom: 14px;\n  padding: 8px 0;\n}\n.form-heading .button {\n  flex: 0;\n}\n.form-heading h3 {\n  font-size: 28px;\n  padding: 6px 0;\n  flex: 1;\n}\n.form-group {\n  margin-bottom: 15px;\n}\n.form-group:last-of-type {\n  margin-bottom: 0;\n}\n.form-group label {\n  display: block;\n}\n.form-group .form-control {\n  display: block;\n  width: 100%;\n  font-size: 14px;\n  padding-left: 10px;\n  line-height: 32px;\n  min-height: 32px;\n  border-radius: 4px;\n  border: 1px solid #dfdfdf;\n  background-color: #fff;\n  -webkit-appearance: none;\n}\n.form-group .form-control.invalid {\n  border-color: var(--danger-color);\n}\n.form-group label {\n  font-size: 14px;\n  color: #fff;\n  margin-bottom: 10px;\n}\n.button {\n  display: inline-block;\n  height: auto;\n  line-height: 1;\n  white-space: nowrap;\n  cursor: pointer;\n  background: #fff;\n  border: 1px solid #dcdfe6;\n  -webkit-appearance: none;\n  text-align: center;\n  box-sizing: border-box;\n  outline: none;\n  margin: 0;\n  transition: 0.1s;\n  font-weight: 500;\n  -moz-user-select: none;\n  -webkit-user-select: none;\n  -ms-user-select: none;\n  padding: 10px 16px;\n  font-size: 14px;\n  border-radius: 4px;\n  background-color: var(--primary-color);\n  color: #fff;\n  border-color: var(--primary-color);\n}\n.button:hover,\n.button:focus {\n  /* color: #409eff; */\n  border-color: #0180da;\n  background-color: #0180da;\n}\n.button:active {\n  /* color: #3a8ee6; */\n  border-color: #3a8ee6;\n  opacity: 0.8;\n}\n.button.button-danger {\n  background-color: var(--danger-color);\n  border-color: var(--danger-color);\n}\n.button.button-danger:hover,\n.button.button-danger:focus {\n  border-color: #e56764;\n  background-color: #e56764;\n}\n.button.button-default {\n  color: #333;\n  background-color: #fff;\n  border-color: #ccc;\n}\n.button.button-default:hover,\n.button.button-default:focus {\n  border-color: #ccc;\n  background-color: #ddd;\n}\n.button.button-mini {\n  font-size: 12px;\n  padding: 6px 8px;\n}\n#public-widget-container {\n  position: fixed;\n  right: 20px;\n  bottom: 20px;\n  display: flex;\n  flex-direction: column;\n}\n.public-widget-item {\n  position: relative;\n}\n.public-widget-item .widget-content {\n  position: absolute;\n  right: 50px;\n  bottom: 0;\n  padding: 5px;\n  border-radius: 5px;\n  background-color: #fff;\n  box-shadow: var(--widget-boxshadow);\n}\n.public-widget-item .widget-control {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 40px;\n  height: 40px;\n  padding: 5px;\n  margin: 5px 0;\n  border-radius: 5px;\n  background-color: #fff;\n  box-shadow: var(--widget-boxshadow);\n  cursor: pointer;\n  transition: all 0.3s ease;\n  will-change: transform;\n}\n.public-widget-item svg {\n  vertical-align: middle;\n  transition: all 0.3s ease;\n  will-change: transform;\n}\n.public-widget-item .widget-control:hover {\n  transform: scale(1.02);\n}\n.public-widget-item .widget-control:hover svg {\n  transform: scale(1.1);\n}\n.public-widget-item .widget-control:hover svg * {\n  fill: var(--primary-color);\n}\n#user-widget-container {\n  position: fixed;\n  left: 0px;\n  padding-left: 20px;\n  top: 20px;\n  display: flex;\n  flex-direction: column;\n  transform: translateX(-100%);\n  opacity: 0;\n  transition: all 0.3s ease;\n}\n#user-widget-container.active {\n  transform: translateX(0);\n  opacity: 1;\n}\n.user-widget-item {\n  background-color: rgba(255, 255, 255, 0.9);\n  padding: 10px;\n  border-radius: 5px;\n  box-shadow: var(--widget-boxshadow);\n  text-align: center;\n  user-select: none;\n  margin: 5px 0;\n}\n#statistic {\n  text-align: left;\n}\n#statistic h3 {\n  font-size: 14px;\n}\n#statistic p {\n  font-size: 12px;\n  line-height: 1.6;\n  color: #999;\n}\n#statistic .items {\n  margin-top: 10px;\n  display: flex;\n  justify-content: space-between;\n  min-width: 200px;\n}\n#statistic .items span:last-of-type {\n  border-right: none;\n  padding-right: 0px;\n}\n#login-form-container {\n  display: none;\n  justify-content: center;\n  align-items: center;\n  position: fixed;\n  /* z-index: 9999; */\n  width: 100%;\n  height: 100%;\n  left: 0px;\n  top: 0px;\n  background-color: #f0f8ff;\n  backdrop-filter: blur(5px);\n  -webkit-backdrop-filter: blur(5px);\n  -webkit-perspective: 1000;\n  perspective: 1000;\n  overflow: hidden;\n}\n#login-form-container.active {\n  display: flex;\n}\n#login-form-container .form {\n  position: absolute;\n  backface-visibility: hidden;\n  -webkit-backface-visibility: hidden;\n  visibility: visible;\n  min-width: 300px;\n  background-color: var(--grey-color);\n  border-radius: 10px;\n  padding: 20px;\n  box-shadow: 0px 0px 20px #999;\n  transition: all 0.6s ease;\n}\n#login-form-container .form:hover {\n  box-shadow: 0px 0px 20px #666;\n}\n#login-form-container .button {\n  width: 100%;\n}\n#login-form {\n  /* z-index: 99; */\n}\n#register-form {\n  /* display: none; */\n  /* z-index: 9; */\n  transform: rotateY(180deg);\n}\n#login-form-container.register #register-form {\n  /* display: block; */\n  transform: rotateY(0);\n}\n#login-form-container.register #login-form {\n  /* display: none; */\n  transform: rotateY(-180deg);\n}\n#login-form-container .login-form-footer {\n  color: #fefefe;\n}\n.full-preview-container {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: fixed;\n  left: 0;\n  top: 0;\n  /* z-index: 99999; */\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  background-color: rgba(0, 0, 0, 0);\n  transition: all 0.3s ease;\n  opacity: 0;\n}\n.full-preview-container.loading:before {\n  content: "加载中";\n  display: block;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  color: #fff;\n  z-index: 9;\n}\n.full-preview-container.loading .full-preview-list {\n  filter: brightness(0.3);\n  -webkit-filter: brightness(0.3);\n}\n.full-preview-container.show {\n  background-color: rgba(0, 0, 0, 0.6);\n  opacity: 1;\n}\n.full-preview-container.show .full-preview-list {\n  opacity: 1;\n  transform: scale(1);\n}\n.full-preview-list {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  text-align: center;\n  padding: 0 10px;\n  padding-top: 20px;\n  max-width: 100%;\n  height: 100%;\n  max-height: calc(100% - 160px);\n  opacity: 0;\n  transform: scale(0.7);\n  transition: all 0.3s ease;\n}\n.full-preview-close {\n  position: absolute;\n  right: 10px;\n  top: 10px;\n  width: 30px;\n  height: 30px;\n  cursor: pointer;\n  background-image: url('+l+");\n  background-repeat: no-repeat;\n  background-size: cover;\n}\n.full-preview-list img {\n  height: 100%;\n  width: 100%;\n  object-fit: contain;\n}\n.full-preview-indicator {\n  position: absolute;\n  bottom: 0px;\n  display: flex;\n  align-items: center;\n  padding: 10px 0;\n  flex-grow: 0;\n  max-width: 100%;\n  overflow-y: hidden;\n  overflow-x: auto;\n}\n.preview-indicator {\n  flex: none;\n  width: 50px;\n  height: 50px;\n  margin: 5px 5px;\n  border-radius: 5px;\n  overflow: hidden;\n  cursor: pointer;\n  border: 2px solid transparent;\n  flex-shrink: 0;\n  background-color: rgba(0, 0, 0, 0.1);\n}\n.preview-indicator.active {\n  border-color: var(--primary-color);\n}\n.preview-indicator img {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\n.confirm-container {\n  position: fixed;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  top: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  opacity: 0;\n  transition: all 0.3s ease;\n  /* z-index: 99999; */\n}\n.confirm-container.show {\n  opacity: 1;\n}\n.confirm-container.show .confirm-content {\n  transform: translateY(0);\n}\n.confirm-content {\n  border-radius: 5px;\n  padding: 10px 5px;\n  background-color: rgba(0, 0, 0, 0.8);\n  box-shadow: var(--widget-boxshadow);\n  transition: all 0.3s ease;\n  transform: translateY(-20px);\n  will-change: transform;\n  width: 200px;\n}\n.confirm-text {\n  color: #fff;\n  padding: 0px 10px;\n  margin-bottom: 10px;\n}\n.confirm-control {\n  display: flex;\n  justify-content: space-between;\n  padding: 0 10px;\n}\n.toast-item {\n  position: fixed;\n  z-index: 9999;\n  left: 50%;\n  transform: translateX(-50%);\n  background-color: #fff;\n  border-radius: 5px;\n  box-shadow: 0px 0px 15px #dedede;\n  padding: 5px 10px;\n  text-align: center;\n  width: 300px;\n  font-size: 14px;\n  line-height: 2;\n  word-break: break-all;\n  transition: top 0.2s;\n  animation: fadeIn 0.2s;\n}\n.toast-item.fade-out {\n  animation: fadeOut 0.2s;\n  animation-fill-mode: forwards;\n}\n@keyframes fadeOut {\n  0% {\n    opacity: 1;\n    transform: translate(-50%, 0);\n  }\n  100% {\n    opacity: 0;\n    transform: translate(-50%, -30px);\n    display: none;\n  }\n}\n@keyframes fadeIn {\n  0% {\n    opacity: 0;\n    transform: translate(-50%, -30px);\n  }\n  100% {\n    opacity: 1;\n    transform: translate(-50%, 0);\n  }\n}\n.toast-item.toast-danger {\n  background-color: var(--danger-color);\n  color: #fff;\n}\n.toast-item.toast-primary {\n  background-color: var(--primary-color);\n  color: #fff;\n}\n.amap-sug-result {\n  border-radius: 5px;\n}\n.amap-sug-result .auto-item {\n  padding: 8px 10px;\n  color: #666;\n}\n@media screen and (max-width: 750px) {\n  .hidden-mobile {\n    display: none;\n  }\n  #user-widget-container {\n    padding: 0px 10px;\n    left: 0;\n    top: 10px;\n    width: 100%;\n  }\n  .point-form-container {\n    width: 100%;\n  }\n  .point-detail {\n    max-width: 80vw;\n  }\n  .point-image {\n    width: 23.5vw;\n    height: 23.5vw;\n    position: relative;\n    border-radius: 5px;\n    overflow: hidden;\n    margin-right: 1vw;\n    margin-bottom: 5px;\n  }\n}\n",""]);const d=c},154:e=>{"use strict";e.exports=function(e){var n=[];return n.toString=function(){return this.map((function(n){var t=e(n);return n[2]?"@media ".concat(n[2]," {").concat(t,"}"):t})).join("")},n.i=function(e,t,r){"string"==typeof e&&(e=[[null,e,""]]);var o={};if(r)for(var i=0;i<this.length;i++){var a=this[i][0];null!=a&&(o[a]=!0)}for(var s=0;s<e.length;s++){var c=[].concat(e[s]);r&&o[c[0]]||(t&&(c[2]?c[2]="".concat(t," and ").concat(c[2]):c[2]=t),n.push(c))}},n}},833:e=>{"use strict";e.exports=function(e,n){return n||(n={}),"string"!=typeof(e=e&&e.__esModule?e.default:e)?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),n.hash&&(e+=n.hash),/["'() \t\n]/.test(e)||n.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e)}},6:(e,n,t)=>{"use strict";t.d(n,{Z:()=>r});const r="/images/c40f30814ba1c28834a2b2e6cfc35e5a.png"},574:(e,n,t)=>{"use strict";var r,o=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},i=function(){var e={};return function(n){if(void 0===e[n]){var t=document.querySelector(n);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}e[n]=t}return e[n]}}(),a=[];function s(e){for(var n=-1,t=0;t<a.length;t++)if(a[t].identifier===e){n=t;break}return n}function c(e,n){for(var t={},r=[],o=0;o<e.length;o++){var i=e[o],c=n.base?i[0]+n.base:i[0],l=t[c]||0,d="".concat(c," ").concat(l);t[c]=l+1;var p=s(d),u={css:i[1],media:i[2],sourceMap:i[3]};-1!==p?(a[p].references++,a[p].updater(u)):a.push({identifier:d,updater:g(u,n),references:1}),r.push(d)}return r}function l(e){var n=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var o=t.nc;o&&(r.nonce=o)}if(Object.keys(r).forEach((function(e){n.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(n);else{var a=i(e.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(n)}return n}var d,p=(d=[],function(e,n){return d[e]=n,d.filter(Boolean).join("\n")});function u(e,n,t,r){var o=t?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=p(n,o);else{var i=document.createTextNode(o),a=e.childNodes;a[n]&&e.removeChild(a[n]),a.length?e.insertBefore(i,a[n]):e.appendChild(i)}}function f(e,n,t){var r=t.css,o=t.media,i=t.sourceMap;if(o?e.setAttribute("media",o):e.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var m=null,h=0;function g(e,n){var t,r,o;if(n.singleton){var i=h++;t=m||(m=l(n)),r=u.bind(null,t,i,!1),o=u.bind(null,t,i,!0)}else t=l(n),r=f.bind(null,t,n),o=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)};return r(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap)return;r(e=n)}else o()}}e.exports=function(e,n){(n=n||{}).singleton||"boolean"==typeof n.singleton||(n.singleton=o());var t=c(e=e||[],n);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<t.length;r++){var o=s(t[r]);a[o].references--}for(var i=c(e,n),l=0;l<t.length;l++){var d=s(t[l]);0===a[d].references&&(a[d].updater(),a.splice(d,1))}t=i}}}}},n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={id:r,exports:{}};return e[r](o,o.exports,t),o.exports}t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),(()=>{"use strict";var e=t(574),n=t.n(e),r=t(554),o={insert:"head",singleton:!1};n()(r.Z,o);r.Z.locals;class i{constructor(){this.eventsList={}}_pushEvent(e,n){let t=this;Object.prototype.hasOwnProperty.call(t.eventsList,e)?t.eventsList[e].push(n):t.eventsList[e]=[n]}on(e,n){let t=this,r=Object.prototype.toString.call(e);return"[object String]"==r?(t._pushEvent(e,n),t):"[object Array]"==r&&(e.forEach((e=>{t._pushEvent(e,n)})),t)}emit(){let e=this,n=[].shift.call(arguments),t=[...e.eventsList[n]];if(!t||0==t.length)return!1;t.forEach((n=>{n.apply(e,arguments)}))}}new i;const a=(()=>{const e=e=>Object.prototype.toString.call(e);Date.prototype.format=function(e){var n={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var t in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+t+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?n[t]:("00"+n[t]).substr((""+n[t]).length)));return e};let n=[];return{createDom:e=>{let n=document.createElement("div");n.innerHTML=e;let t=n.childNodes;if(t.length<=1)return t[0]||null;{let e=document.createDocumentFragment();for(;t.length;)e.appendChild(t[0]);return e}},resolvePreview:(e,n=200,t=200)=>{let r=`_${n}x${t}`,o=e.replace(/(.*\/)*([^.]+).*/gi,"$2");return e.replace(o,o+r)},isNull:n=>"[object Null]"===e(n),isString:n=>"[object String]"===e(n),isArray:n=>"[object Array]"===e(n),valid:e=>{let n=!0;return document.querySelector(e).querySelectorAll(".form-control[name]").forEach((e=>{e.classList.remove("invalid");let t=e.value;a.isString(t)&&(t=t.trim()),"required"==e.getAttribute("required")&&(""!==t&&null!=t||(e.classList.add("invalid"),n=!1)),e.getAttribute("data-pattern")&&(new RegExp(e.getAttribute("data-pattern")).test(t)||(e.classList.add("invalid"),n=!1))})),n},toast:(e,t={})=>{let r={el:a.createDom(`<div class="toast-item">${e}</div>`),height:0,bottom:0},o=10;t.type&&r.el.classList.add({error:"toast-danger",success:"toast-primary"}[t.type]),n.length&&(o=document.querySelector(".toast-item:last-of-type").getBoundingClientRect().bottom+10),r.el.style.top=o+"px",n.push(r),document.body.appendChild(r.el),r.height=r.el.offsetHeight,setTimeout((()=>{r.el.classList.add("fade-out"),setTimeout((()=>{r.el.remove()}),200),n.splice(0,1),n.forEach((e=>{e.el.style.top=parseInt(e.el.style.top,10)-r.height-10+"px"}))}),2e3)},confirm:(e,n={})=>{let t=a.createDom(`<div class="confirm-container"> <div class="confirm-content">  <p class="confirm-text">${e}</p><div class="confirm-control"><button class="button button-confirm">确认</button><button class="button button-default button-cancel">取消</button></div></div></div></div>`);n.type&&t.classList.add({error:"toast-danger",success:"toast-primary"}[n.type]);let r=new Promise(((e,n)=>{t.querySelector(".button-cancel").addEventListener("click",(()=>{t.classList.remove("show"),setTimeout((()=>{t.remove()}),200),e(!1)})),t.querySelector(".button-confirm").addEventListener("click",(()=>{t.classList.remove("show"),setTimeout((()=>{t.remove()}),200),e(!0)}))}));if(n.fitEl){let e=t.querySelector(".confirm-content");e.style.position="absolute";let r=n.fitEl.getBoundingClientRect();document.body.clientWidth-r.right-5>200?e.style.left=r.right+5+"px":r.left-5>200&&(e.style.left=r.left-200-5+"px"),e.style.top=r.top+"px"}return document.body.appendChild(t),setTimeout((()=>{t.classList.add("show")}),0),r},clearTimeout:e=>{e.forEach((e=>{clearTimeout(e)}))}}})(),s=a;var c=t(147),l=t.n(c);const d=(()=>{let e="//192.168.50.74:3000";-1!=location.host.indexOf("travel")&&(e="//travel.whimsylove.cn/api");const n=l().create({baseURL:`${e}`,timeout:15e3});return n.interceptors.request.use((e=>{var n=window.localStorage.getItem("AUTH");return n&&(e.headers.Authorization="Bearer "+n),e}),(e=>Promise.reject(e))),n.interceptors.response.use((e=>200==e.status&&1==e.data.status?e.data:-1==e.data.status?Promise.reject(e.data):Promise.reject(e)),(e=>e)),{getPoints:e=>n({url:"/points",method:"GET",params:e}),getPointsStatistic:()=>n({url:"/statistic",method:"GET"}),createPoint:e=>n({url:"/points",method:"POST",data:e}),removePoint:e=>n({url:`/points/${e}`,method:"DELETE"}),getUserInfo:()=>n({url:"/user",method:"GET"}),login:e=>n({url:"/login",method:"POST",data:e}),upload:e=>n({url:"/upload",headers:{"Content-Type":"multipart/form-data"},method:"POST",data:e}),register:e=>n({url:"/register",method:"POST",data:e})}})();const p=class{constructor(e,n={maxSize:51200}){this.$el=document.querySelector(e),this.fileList=[],this.options=n,this.uploading=!1,this._init()}_init(){let e=this;e.$el.classList.add("upload"),e.$el.appendChild(s.createDom('\n          <div class="upload-preview">\n            <div class="upload-card">\n              <input class="form-control upload-control" multiple type="file"  accept="image/*" ">\n            </div>\n          </div> \n      ')),e.$preview=e.$el.querySelector(".upload-preview"),e.$card=e.$preview.querySelector(".upload-card"),e.$input=e.$el.querySelector(".upload-control"),e.$input.addEventListener("change",(n=>{e.fileChange(n.srcElement)})),e.$card.addEventListener("click",(()=>{e.$input.click()})),e.$preview.addEventListener("click",(n=>{if(n.srcElement.classList.contains("upload-preview-image-remove")){let t=Array.from(e.$preview.querySelectorAll(".upload-preview-image")).indexOf(n.srcElement.parentNode);e.fileList.splice(t,1),n.srcElement.parentNode.remove()}})),e.options.drag&&(e.$el.addEventListener("dragleave",(function(n){e.$el.classList.remove("dragging")})),e.$el.addEventListener("dragover",(function(n){n.stopPropagation(),n.preventDefault(),e.$el.classList.add("dragging"),n.dataTransfer.dropEffect="copy"})),e.$el.addEventListener("drop",(function(n){n.stopPropagation(),n.preventDefault(),e.$el.classList.remove("dragging");var t=n.dataTransfer.files;e.filePreview(t)})))}filePreviewReset(){let e=this;e.fileList=[],e.$el.value=null,e.$preview.querySelectorAll(".upload-preview-image").forEach((e=>{e.remove()}))}filePreview(e){let n=this,t=n.$card,r="";for(let o of e){if(o.size/1024>n.options.maxSize){s.toast(`【${o.name}】文件过大，单个文件小于50M`,{type:"error"});continue}n.fileList.push(o),r=`<div class="upload-preview-image">\n              <div class="upload-preview-image-remove">\n                 X\n              </div>\n              <img src="${window.URL.createObjectURL(o)}" alt="">\n              </div>`;let e=s.createDom(r);n.$preview.insertBefore(e,t)}}fileChange(e){let n=e.files,t=this;n.length&&t.filePreview(n)}upload(){let e=this,n=0;return e.uploading=!0,e.fileList.forEach((e=>{n+=e.size})),n/1024>e.options.maxSize?new Promise(((n,t)=>{s.toast("文件总大小超过50M，正在分批上传，请等待",{type:"success"}),e.fileList.sort(((e,n)=>e.size-n.size));let r=0,o=0,i=[];for(let n of e.fileList)(r+n.size)/1024<e.options.maxSize?(r+=n.size,i[o]?i[o].push(n):i[o]=[n]):(++o,r=n.size,i[o]=[n]);let a=[],c=[];for(let e of i)c.push(new Promise(((n,t)=>{let r=new FormData;e.forEach((e=>{r.append("files",e)})),d.upload(r).then((e=>{a=a.concat(e.data),n()}))})));Promise.all(c).then((e=>{n(a)})).catch((e=>{t(e)})).finally((n=>{e.uploading=!1}))})):new Promise(((n,t)=>{if(e.fileList.length<1)return n([]),!1;let r=new FormData;e.fileList.forEach((e=>{r.append("files",e)})),d.upload(r).then((e=>{n(e.data)})).catch((e=>{e.msg&&s.toast(msg,{type:"error"})})).finally((n=>{e.uploading=!1}))}))}};const u=(()=>{let e=s.createDom('<div class="full-preview-container">\n    <div class="full-preview-close"></div><div class="full-preview-list"> <img></div><div class="full-preview-indicator"></div>'),n=e.querySelector(".full-preview-list"),t=e.querySelector(".full-preview-indicator");e.addEventListener("click",(n=>{n.target==e&&r.closePreview()})),e.addEventListener("gesturestart",(e=>{e.preventDefault()})),e.querySelector(".full-preview-close").addEventListener("click",(()=>{r.closePreview()}));var r={closePreview:()=>{e.classList.remove("show"),setTimeout((()=>{e.remove(),t.innerHTML=""}),200)},loadImage:(n,t)=>{let r=new Image,o=null;r.addEventListener("load",(function(){o&&clearTimeout(o),e.classList.remove("loading"),n.src=t}),!1),r.addEventListener("error",(function(){o&&clearTimeout(o),e.classList.remove("loading"),s.toast("图片加载失败",{type:"error"})}),!1),r.src=t,o=setTimeout((()=>{e.classList.add("loading")}),100)},previewImages:(o,i)=>{n.querySelector("img").src=o[i].thumb,o.forEach(((e,o)=>{let a=s.createDom(`<div class="preview-indicator ${o==i?"active":""}"><img src="${e.thumb}" alt=""></div>`);a.addEventListener("click",(()=>{t.querySelector(".preview-indicator.active").classList.remove("active"),a.classList.add("active"),r.loadImage(n.querySelector("img"),e.url)})),t.appendChild(a)})),r.loadImage(n.querySelector("img"),o[i].url),document.body.appendChild(e),setTimeout((()=>{e.classList.add("show")}),0)}};return r})(),f=new i;window.onload=()=>{m.refresh().then((()=>{b()})),document.querySelector("#point-form-submit").addEventListener("click",(e=>{v.submit()})),document.querySelector("#login-form-submit").addEventListener("click",(e=>{m.login().then((e=>{b()}))})),document.querySelector("#register-form-submit").addEventListener("click",(e=>{m.register().then((e=>{b()}))}))};var m=(()=>{let e=document.querySelector("#login-form"),n=document.querySelector("#register-form"),t=document.querySelector("#login-form-container"),r={};return{refresh:()=>new Promise(((e,n)=>{d.getUserInfo().then((n=>{r=n.data,m.close(),e(r)})).catch((e=>{-1==e.status&&m.open(),n(e)}))})),open:()=>{t.classList.add("active")},close:()=>{e.reset(),t.classList.remove("active")},switch:()=>{t.classList.toggle("register")},info:e=>e&&Object.prototype.hasOwnProperty.call(r,e)?r[e]:r,register:()=>{if(!s.valid("#register-form"))return Promise.reject("表单验证失败");let e=new FormData(n),t={};return e.forEach(((e,n)=>{t[n]=e})),d.register(t).then((e=>{try{window.localStorage.setItem("AUTH",e.data.token)}catch(e){}r=e.data,m.refresh(),m.close()}))},login:()=>{if(!s.valid("#login-form"))return Promise.reject("表单验证失败");let n=new FormData(e),t={};return n.forEach(((e,n)=>{t[n]=e})),d.login(t).then((e=>{try{window.localStorage.setItem("AUTH",e.data.token)}catch(e){}r=e.data,m.refresh(),m.close()})).catch((e=>{s.toast(e.data.msg,{type:"error"})}))},logout:e=>{s.confirm("确认退出登录",{fitEl:e.target||null}).then((e=>{e&&(window.localStorage.removeItem("AUTH"),window.location.reload())}))}}})(),h=(()=>{let e=document.querySelector("#user-widget-container");return f.on(["map:init","marker:remove","marker:create"],(()=>{g.refresh()})),{show:()=>{e.classList.add("active")},hide:()=>{e.classList.remove("active")}}})(),g=(()=>{let e=document.querySelector("#statistic");return{open:()=>{},refresh:()=>{d.getPointsStatistic().then((n=>{let t=`\n          <div class="flex">\n            <div>\n              <h4>${m.info("nickname")}</h4>  \n              <p>${m.info("username")}</p>\n              <p>${new Date(m.info("create_time")).format("yyyy-MM-dd")}加入</p>\n              \n            </div>\n            <div>\n              <button class="button button-mini" onclick="USER.logout(event)">注销</button>\n            </div>\n          </div> \n          <div class="items" onclick="STATISTIC.open()">\n            <span><b>${n.data.total||0}</b>个地点</span>  \n            <span><b>${n.data.province.length}</b>个省</span>\n            <span><b>${n.data.city.length}</b>个城市</span>\n          </div>`;e.innerHTML=t,h.show()}))}}})(),v=(()=>{let e=document.querySelector("#point-form-container"),n=document.querySelector("#point-form"),t=new p("#upload-test",{drag:!0});return{open:()=>{e.classList.add("active")},close:()=>{n.reset(),t.filePreviewReset(),x&&x.setMap(null),e.classList.remove("active")},submit:()=>!!s.valid("#point-form")&&(t.uploading?(s.toast("正在上传文件，请勿重复提交",{type:"error"}),!1):void t.upload().then((e=>{let t=new FormData(n),r={images:e,lnglat:w,city:y.addressComponent.city,province:y.addressComponent.province};t.forEach(((e,n)=>{r[n]=s.isString(e)?e.trim():e})),d.createPoint(r).then((e=>{L(e.data),s.toast("创建足迹成功",{type:"success"}),v.close()}))})))}})(),b=()=>{AMapLoader.load({key:"42b77b78693257d472dc3c70311c3b1f",version:"2.0",plugins:["AMap.MarkerCluster","AMap.MouseTool","AMap.Geocoder","AMap.Geolocation","AMap.PlaceSearch","AMap.AutoComplete"]}).then((e=>{window.AMap=e,d.getPoints().then((n=>{M(e,n.data.points)})),f.emit("map:init")})).catch((e=>{}))},x=null,w=null,y=null,S=[],k=e=>{let n=S.length,t=s.createDom(`<div class='point-detail'><h3>${e.title}</h3>\n  <pre>${e.remark}</pre>\n  <p><small>${e.province+"-"}${e.city+"-"}${e.address}</small></p>\n  <p><small>${new Date(e.dateTime).format("yyyy-MM-dd")}</small></p></div>`);if(e.images&&e.images.length){let n=s.createDom('<div class="point-images"></div>');e.images.forEach(((t,r)=>{let o=s.createDom(`<div class="point-image"><img data-source="${t.url}" data-src="${t.thumb}" alt=""></div>`);o.addEventListener("click",(()=>{u.previewImages(e.images,r)})),n.appendChild(o)})),t.appendChild(n)}let r=s.createDom("<button class='point-remove button button-mini'>删除</button");return r.addEventListener("click",(()=>{E(e,n)})),t.appendChild(r),t},E=(e,n)=>{s.confirm("确认删除？").then((t=>{t&&d.removePoint(e.id).then((e=>{S[n-1].setMap(null),MAP.clearInfoWindow(),f.emit("marker:remove")}))}))},A=e=>{var n=new AMap.InfoWindow({closeWhenClickMap:!0,offset:new AMap.Pixel(0,-30)});AMap.Browser.mobile&&(n.on("open",(()=>{h.hide()})),n.on("close",(()=>{h.show()})));let t=e.target.content.querySelectorAll(".point-images img");if(t&&t.length)for(let e of t)e.src||(e.src=e.getAttribute("data-src"));n.setContent(e.target.content),n.open(MAP,e.target.getPosition())},L=e=>{const n=new AMap.Icon({size:new AMap.Size(30,30),image:"/images/2fff6b20fee5f6febb454112aed541fc.png",imageSize:new AMap.Size(30,30)});switch(Object.prototype.toString.call(e)){case"[object String]":if("temp"==e){try{x.setMap(null)}catch(e){}return(t=new AMap.Marker({imageSize:new AMap.Size(25,34),position:w,map:MAP,offset:new AMap.Pixel(-16,-32),icon:"/images/88e74634ba4b9b19d8a3ee7a9d646674.png"})).on("click",(()=>{t.setMap(null),v.close()})),x=t}break;case"[object Array]":for(let r=0;r<e.length;r++){var t=new AMap.Marker({position:e[r].lnglat.split(","),map:MAP,offset:new AMap.Pixel(-16,-30),icon:n});S.push(t),t.content=k(e[r]),t.on("click",A)}break;case"[object Object]":t=new AMap.Marker({position:e.lnglat.split(","),map:MAP,offset:new AMap.Pixel(-16,-30),icon:n});S.push(t),t.content=k(e),t.on("click",A)}f.emit("marker:create")},M=(e,n)=>{window.MAP=new e.Map("map-container",{zoom:11,zooms:[4,14],doubleClickZoom:!1,rotateEnable:!1});const t=new e.Geocoder({extensions:"all"}),r=new e.Geolocation({enableHighAccuracy:!0,timeout:1e4});L(n),new e.AutoComplete({input:"poi-search-input",city:"成都"}).on("select",(e=>{e.poi.location&&(MAP.setZoomAndCenter(13,[e.poi.location.lng,e.poi.location.lat]),w=e.poi.location,i(w))}));var o=new e.ContextMenu;o.addItem("添加标记",(function(e){L("temp");v.open(),o.close()}),0);var i=e=>{t.getAddress(e,(function(e,n){if("complete"===e&&n.regeocode){var t=n.regeocode;window.contextMenuAddress=t,((e,n)=>{let t="";for(let n of e)t+=`<option value="${n.name}">${n.name}</option>`;n.innerHTML=t})(t.pois,document.querySelector("#point-form-container select[name='address']"));L("temp");v.open()}else s.toast("根据经纬度查询地址失败")}))};if(e.Browser.mobile){let e=[];MAP.on("touchstart",(function(n){e&&clearTimeout(e),e.push(setTimeout((()=>{w=n.lnglat,i(w)}),700))})),MAP.on("touchend",(function(n){s.clearTimeout(e)})),MAP.on("touchmove",(function(n){s.clearTimeout(e)})),MAP.on("zoomstart",(function(n){s.clearTimeout(e)}))}else MAP.on("rightclick",(function(e){w=e.lnglat,i(w)}));document.querySelector("#map-control-fullview").addEventListener("click",(e=>{MAP.setFitView()})),document.querySelector("#map-control-location").addEventListener("click",(e=>{r.getCurrentPosition((function(e,n){"complete"==e&&(MAP.setZoomAndCenter(14,n.position),w=n.position,L("temp"))}))})),MAP.setFitView()}})()})();